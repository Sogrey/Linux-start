(window.webpackJsonp=window.webpackJsonp||[]).push([[127],{445:function(t,s,a){"use strict";a.r(s);var v=a(14),e=Object(v.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"grub-多重引导程序grub的命令行shell工具"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#grub-多重引导程序grub的命令行shell工具"}},[t._v("#")]),t._v(" grub - 多重引导程序grub的命令行shell工具")]),t._v(" "),s("p",[t._v("grub命令 是多重引导程序grub的命令行shell工具。")]),t._v(" "),s("h2",{attrs:{id:"适用范围"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#适用范围"}},[t._v("#")]),t._v(" 适用范围")]),t._v(" "),s("div",{staticClass:"svg redhat"},[t._v("RedHat")]),t._v(" "),s("div",{staticClass:"svg rhel"},[t._v("RHEL")]),t._v(" "),s("div",{staticClass:"svg ubuntu"},[t._v("Ubuntu")]),t._v(" "),s("div",{staticClass:"svg centos"},[t._v("CentOS")]),t._v(" "),s("div",{staticClass:"svg debian"},[t._v("Debian")]),t._v(" "),s("div",{staticClass:"svg deepin"},[t._v("Deepin")]),t._v(" "),s("div",{staticClass:"svg suse"},[t._v("SUSE")]),t._v(" "),s("div",{staticClass:"svg opensuse"},[t._v("openSUSE")]),t._v(" "),s("div",{staticClass:"svg fedora"},[t._v("Fedora")]),t._v(" "),s("div",{staticClass:"svg linuxmint"},[t._v("Linux Mint")]),t._v(" "),s("div",{staticClass:"svg alpinelinux"},[t._v("Alpine Linux")]),t._v(" "),s("div",{staticClass:"svg archlinux"},[t._v("Arch Linux")]),t._v(" "),s("h2",{attrs:{id:"语法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[t._v("#")]),t._v(" 语法")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("grub  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("OPTION"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("h2",{attrs:{id:"选项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#选项"}},[t._v("#")]),t._v(" 选项")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--batch")]),t._v("                     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 打开批处理模式；")]),t._v("\n--boot-drive"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("驱动器"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 指定stage2的引导驱动器；")]),t._v("\n--config-file"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("配置文件"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 指定stage2的配置文件；")]),t._v("\n--device-map"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("文件"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 指定设备的映射文件；")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--help")]),t._v("                       "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 显示帮助信息；")]),t._v("\n--install-partition"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("分区"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 指定stage2安装分区；")]),t._v("\n--no-config-file            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 不使用配置文件；")]),t._v("\n--no-pager                   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 不使用内部分页器；")]),t._v("\n--preset-menu               "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用预设菜单；")]),t._v("\n--probe-second-floppy        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 检测第二个软盘驱动器；")]),t._v("\n--read-only                 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 只读模式。")]),t._v("\n")])])]),s("h2",{attrs:{id:"实例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实例"}},[t._v("#")]),t._v(" 实例")]),t._v(" "),s("p",[t._v("利用grub命令来启动损坏的Linux系统，可能你的电脑因为某些原因损坏不能自动启动了。当然原因很多，可能的现象也很多。")]),t._v(" "),s("p",[t._v("这里说一下这种情况下的处理方法，即：屏幕上提示"),s("code",[t._v("grub>")]),t._v("，但你的硬盘上数据没有丢失，各分区都是好的。这种情况是你的grub信息损坏了，但比较严重的是系统启动不了。")]),t._v(" "),s("p",[t._v("当然，在正常启动情况下，屏幕上出现grub的启动项选择菜单时按"),s("code",[t._v("c")]),t._v("键也是可以进入"),s("code",[t._v("grub>")]),t._v("状态的。这时候我们需要用grub的命令来手工启动系统。")]),t._v(" "),s("p",[t._v("只需要用到四个命令boot、kernel、initrd、boot。")]),t._v(" "),s("p",[t._v("但grub本身命令很多，比如查看文件内容的cat ，你输入help会得到。")]),t._v(" "),s("p",[t._v("首先，输入“ root (hd ” ，然后按两次 TAB 键； /* 这会列出你电脑上可能的磁盘设备，硬盘为 hd0/hd1 或 sd0/sd1 等 */")]),t._v(" "),s("p",[t._v("然后，选择你的安装 Linux 系统的硬盘，比如 hd0 ，输入 “ root (hd0, ” 再按两次 TAB 键； /* 这会列出你的第一块硬盘上的分区情况，你会知道哪个是 swap 交换分区， 0x82 ，哪个是 Linux 分区 0x83 */")]),t._v(" "),s("p",[t._v("选择你认为可能的 /boot 目录所在的分区， 输入"),s("code",[t._v("root (hd0, 1)")]),t._v("回车；")]),t._v(" "),s("p",[t._v("接着，输入"),s("code",[t._v("cat /boot/vm")]),t._v("， 按两次 TAB 键，如果出现一些 vm 开头的文件，比如 vmlinuz-2.6.15-26-386 说明这里是 /boot 所在的分区。")]),t._v(" "),s("p",[t._v("删除上一次的输入，再输入"),s("code",[t._v("cat /boot/initrd")]),t._v("，按两次 TAB 键，如果出现一些 initrd 开头的文件，比如 initrd.img-2.6.15-26-386 说明这个 /boot 所在的分区有 initrd ，即 ramdisk 镜像；")]),t._v(" "),s("p",[t._v("删除上一次的输入，再输入"),s("code",[t._v("cat /sbin/init")]),t._v("，按两次 TAB 键，如果出现一些 init 开头的文件，比如"),s("code",[t._v("/sbin/init")]),t._v("说明这个分区是"),s("code",[t._v("/")]),t._v("所在的分区；")]),t._v(" "),s("p",[t._v("如果没有出现"),s("code",[t._v("/sbin/init")]),t._v("文件，说明"),s("code",[t._v("(hd0,1)")]),t._v("分区仅仅是"),s("code",[t._v("/boot")]),t._v("分区而不是"),s("code",[t._v("/")]),t._v("分区。重新输入"),s("code",[t._v("root (hd0,N)")]),t._v("命令，这里 N 是某个 Linux 分区，然后再试"),s("code",[t._v("cat /sbin/init")]),t._v("， 直到屏幕上出现"),s("code",[t._v("/sbin/init")]),t._v("，说明你找到了"),s("code",[t._v("/")]),t._v("分区，严格来说，应该是"),s("code",[t._v("/sbin")]),t._v("目录所在的分区；")]),t._v(" "),s("p",[t._v("依次输入命令：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("root "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("hd0,1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("   /* 假设 /dev/hda2 是你的 /boot 所在的分区 */\nkernel /boot/vmlinuz-2.6.15-26-386 ro "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("dev")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/dev/hda3    /* 假设 /dev/hda3 是你的 / 所在的分区 */\ninitrd /boot/initrd.img-2.6.15-26-386\nboot\n")])])]),s("p",[t._v("即可启动系统。")]),t._v(" "),s("p",[t._v("这里的关键问题是如何确定系统的几个分区："),s("code",[t._v("/boot")]),t._v(" "),s("code",[t._v("/")]),t._v(" "),s("code",[t._v("/sbin")])])])}),[],!1,null,null,null);s.default=e.exports}}]);