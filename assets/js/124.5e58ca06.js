(window.webpackJsonp=window.webpackJsonp||[]).push([[124],{442:function(s,a,t){"use strict";t.r(a);var e=t(14),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"grpck-用于验证组文件的完整性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#grpck-用于验证组文件的完整性"}},[s._v("#")]),s._v(" grpck - 用于验证组文件的完整性")]),s._v(" "),a("p",[s._v("grpck命令 用于验证组文件的完整性，在验证之前，需要先锁定（lock）组文件/etc/group和/etc/shadow。")]),s._v(" "),a("p",[s._v("grpck命令检查数据是否正确存放，每条记录是否都包含足够的信息，是否有一个唯一的组名，是否包含正确的用户，是否正确设置了组的管理员等。grpck检查发现错误以后，在命令行提示用户是否删除错误的记录。如果用户没有明确回答删除记录，grpck终止运行。")]),s._v(" "),a("p",[s._v("grpck指令可以验证组文件“/etc/group”和“/etc/gshadow”的完整性。检查的内容包括：正确的字段数、唯一有效的组名称、有效的组标识符、成员和管理员的有效列表、“/etc/gshadow”文件中的相应条目。检查正确的字段数和唯一的组名是致命的。如果条目有错误的字段数，则会提示用户删除整行。如果用户没有肯定地回答，所有进一步的检查都会被绕过。提示删除具有重复组名的条目，但仍将进行其余检查。所有其他错误都是警告，并鼓励用户运行groupmod命令来更正错误。")]),s._v(" "),a("p",[s._v("对“/etc/group“和“/etc/gshadow“文件进行操作的命令不能更改损坏或重复的条目。在这种情况下，应该使用grpck来删除违规条目。")]),s._v(" "),a("h2",{attrs:{id:"适用范围"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#适用范围"}},[s._v("#")]),s._v(" 适用范围")]),s._v(" "),a("div",{staticClass:"svg redhat"},[s._v("RedHat")]),s._v(" "),a("div",{staticClass:"svg rhel"},[s._v("RHEL")]),s._v(" "),a("div",{staticClass:"svg ubuntu"},[s._v("Ubuntu")]),s._v(" "),a("div",{staticClass:"svg centos"},[s._v("CentOS")]),s._v(" "),a("div",{staticClass:"svg debian"},[s._v("Debian")]),s._v(" "),a("div",{staticClass:"svg deepin"},[s._v("Deepin")]),s._v(" "),a("div",{staticClass:"svg suse"},[s._v("SUSE")]),s._v(" "),a("div",{staticClass:"svg opensuse"},[s._v("openSUSE")]),s._v(" "),a("div",{staticClass:"svg fedora"},[s._v("Fedora")]),s._v(" "),a("div",{staticClass:"svg linuxmint"},[s._v("Linux Mint")]),s._v(" "),a("div",{staticClass:"svg alpinelinux"},[s._v("Alpine Linux")]),s._v(" "),a("div",{staticClass:"svg archlinux"},[s._v("Arch Linux")]),s._v(" "),a("h2",{attrs:{id:"语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[s._v("#")]),s._v(" 语法")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("grpck  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("选项"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  group\n")])])]),a("h2",{attrs:{id:"选项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#选项"}},[s._v("#")]),s._v(" 选项")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v("                               "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 以只读模式运行")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v("                               "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用gid对group和gshadow进行排序")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--help")]),s._v("                           "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示帮助文档")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--version")]),s._v("                        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示命令版本信息")]),s._v("\n")])])]),a("h2",{attrs:{id:"配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[s._v("#")]),s._v(" 配置")]),s._v(" "),a("p",[s._v("下面“/etc/login.defs”中的配置变量更改了该工具的行为：")]),s._v(" "),a("p",[s._v("MAX_MEMBERS_PER_GROUP（number），每个组条目的最大成员数。达到最大值时，在“/etc/group”中启动一个新的组条目(行)(具有相同的名称、相同的密码和相同的GID)。默认值为0，这意味着组中的成员数没有限制。此功能(拆分组)允许限制组文件中的行长度。这对于确保NIS组的行不大于1024个字符非常有用。如果你需要执行这样的限制，你可以使用25。注意：拆分组可能不支持所有的工具(即使在阴影工具集中)。除非您真的需要这个变量，否则不应该使用它。")]),s._v(" "),a("h2",{attrs:{id:"相关文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#相关文件"}},[s._v("#")]),s._v(" 相关文件")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("/etc/group")]),s._v("组账户信息。")]),s._v(" "),a("li",[a("code",[s._v("/etc/gshadow")]),s._v("安全组账户信息。")]),s._v(" "),a("li",[a("code",[s._v("/etc/passwd")]),s._v("用户账户信息。")])]),s._v(" "),a("h2",{attrs:{id:"举例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#举例"}},[s._v("#")]),s._v(" 举例")]),s._v(" "),a("p",[s._v("检查组信息")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sogrey@bogon ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" grpck "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 检查组信息，返回0，没有任何错误")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sudo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" sogrey 的密码：\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sogrey@bogon ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$?")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sogrey@bogon ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ \n")])])]),a("p",[s._v("对/etc/group排序")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sogrey@bogon ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tail")]),s._v(" /etc/group "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看组信息")]),s._v("\npulse-access:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(":986:\npulse-rt:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(":985:\npulse:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(":171:\ngdm:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(":42:\ngnome-initial-setup:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(":984:\nsshd:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(":74:\navahi:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(":70:\nslocate:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(":21:\nvboxsf:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(":983:\nsogrey:123456:1000:sogrey\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sogrey@bogon ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" grpck "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" /etc/group "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 按照gid排序")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sogrey@bogon ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tail")]),s._v(" /etc/group "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看信息，已经排序")]),s._v("\ngeoclue:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(":992:\nssh_keys:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(":993:\ncgred:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(":994:\ncolord:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(":995:\nlibstoragemgmt:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(":996:\nprintadmin:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(":997:\npolkitd:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(":998:\ninput:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(":999:\nsogrey:123456:1000:sogrey\nnfsnobody:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(":65534:\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sogrey@bogon ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ \n")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);