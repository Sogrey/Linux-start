(window.webpackJsonp=window.webpackJsonp||[]).push([[230],{547:function(t,a,s){"use strict";s.r(a);var n=s(14),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"pstree-以树状图的方式展现进程之间的派生关系"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pstree-以树状图的方式展现进程之间的派生关系"}},[t._v("#")]),t._v(" pstree - 以树状图的方式展现进程之间的派生关系")]),t._v(" "),a("p",[t._v("pstree命令 以树状图的方式展现进程之间的派生关系，显示效果比较直观。")]),t._v(" "),a("p",[t._v("pstree显示正在运行的进程的树形结构，树以PID为根；如果省略了pid则以init为根。如果指定了用户名，则显示根植于该用户拥有的进程的所有进程树。如果pstree被调用为pstree.x11，那么它将提示行尾的用户按RETURE，并且在这种情况发生之前不会返回。这对于在x终端中运行pstree非常有用。")]),t._v(" "),a("p",[t._v("pstree通过将相同的分支放在方括号中并以重复计数作为前缀，在视觉上合并它们。例如：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("init-+-getty\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("-getty\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("-getty\n‘-getty\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 变成下面的样子")]),t._v("\ninit---4*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("getty"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("p",[t._v("进程的子线程在父进程下找到，并以大括号显示进程名，例如：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("icecast2---13*[{icecast2}]\n")])])]),a("h2",{attrs:{id:"适用范围"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#适用范围"}},[t._v("#")]),t._v(" 适用范围")]),t._v(" "),a("div",{staticClass:"svg redhat"},[t._v("RedHat")]),t._v(" "),a("div",{staticClass:"svg rhel"},[t._v("RHEL")]),t._v(" "),a("div",{staticClass:"svg ubuntu"},[t._v("Ubuntu")]),t._v(" "),a("div",{staticClass:"svg centos"},[t._v("CentOS")]),t._v(" "),a("div",{staticClass:"svg debian"},[t._v("Debian")]),t._v(" "),a("div",{staticClass:"svg deepin"},[t._v("Deepin")]),t._v(" "),a("div",{staticClass:"svg suse"},[t._v("SUSE")]),t._v(" "),a("div",{staticClass:"svg opensuse"},[t._v("openSUSE")]),t._v(" "),a("div",{staticClass:"svg fedora"},[t._v("Fedora")]),t._v(" "),a("div",{staticClass:"svg linuxmint"},[t._v("Linux Mint")]),t._v(" "),a("div",{staticClass:"svg alpinelinux"},[t._v("Alpine Linux")]),t._v(" "),a("div",{staticClass:"svg archlinux"},[t._v("Arch Linux")]),t._v(" "),a("h2",{attrs:{id:"语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[t._v("#")]),t._v(" 语法")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("pstree  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("OPTION"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("h2",{attrs:{id:"选项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#选项"}},[t._v("#")]),t._v(" 选项")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-a")]),t._v("                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 显示每个进程的完整指令，包括路径、参数")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-A")]),t._v("                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用ascii码显示树形")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-c")]),t._v("                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 关闭精简表示法")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-G")]),t._v("                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用VT 100线条绘制字符")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-h")]),t._v("                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 高亮显示正在执行的程序")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-H")]),t._v("                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 类似“-h”，但是突出显示指定的进程。与-h不同，如果高亮显示不可用，pstree在使用-H时会失败。")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-l")]),t._v("                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 长格式显示")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-n")]),t._v("                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 以进程号排序，默认以名字排序")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v("                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 显示pid")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-u")]),t._v("                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 显示用户")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-U")]),t._v("                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 以utf-8显示字符")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-V")]),t._v("                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 显示命令版本信息")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-Z")]),t._v("                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 每个SELinux的上下文")]),t._v("\n")])])]),a("h2",{attrs:{id:"举例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#举例"}},[t._v("#")]),t._v(" 举例")]),t._v(" "),a("p",[t._v("显示当前所有进程的进程号和进程id")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("pstree "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v("\n")])])]),a("p",[t._v("显示所有进程的所有详细信息，遇到相同的进程名可以压缩显示。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("pstree  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-a")]),t._v("\n")])])]),a("p",[t._v("获取 SSH 会话的 PID")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("pstree "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ssh")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  |-sshd(1221)-+-sshd(2768)---bash(2770)-+-grep(2810)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  |            `-sshd(2807)---sshd(2808)")]),t._v("\n")])])]),a("p",[t._v("从上方的输出中，你可以看到 sshd 进程与分支的树形图。sshd 的主进程是 sshd（1221），另两个分支分别为 sshd（2768） 和 sshd（2807）")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("显示完成的树形结构")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ pstree "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-a")]),t._v("\ninit\n  ├─NetworkManager --pid-file"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/run/NetworkManager/NetworkManager.pid\n  │   ├─dhclient "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-4")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-sf")]),t._v(" /usr/libexec/nm-dhcp-client.action "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-pf")]),t._v(" /var/run/dhclient-eth0.pid "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n  │   └─"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("NetworkManager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  ├─VBoxClient "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--clipboard")]),t._v("\n  │   └─VBoxClient "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--clipboard")]),t._v("\n")])])]),a("p",[t._v("显示进程号")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ pstree "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v("\ninit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("─┬─NetworkManager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6362")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("─┬─dhclient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6377")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        │                      └─"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("NetworkManager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6379")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        ├─VBoxClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7869")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("───VBoxClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7870")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("───"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("VBoxClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7872")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        ├─VBoxClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7882")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("───VBoxClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7883")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        ├─VBoxClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7890")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("───VBoxClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7891")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("───"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("VBoxClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7894")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        ├─VBoxClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7898")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("───VBoxClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7899")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("─┬─"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("VBoxClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7901")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        │                                     └─"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("VBoxClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7903")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        ├─VBoxClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7306")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("───VBoxClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7308")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        ├─VBoxClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7312")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("───VBoxClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7314")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("───"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("VBoxClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7317")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        ├─VBoxClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7318")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("───VBoxClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7320")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("─┬─"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("VBoxClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7323")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        │                                     └─"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("VBoxClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7325")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);