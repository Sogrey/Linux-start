(window.webpackJsonp=window.webpackJsonp||[]).push([[252],{571:function(a,s,e){"use strict";e.r(s);var t=e(14),r=Object(t.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"skill-向选定的进程发送信号冻结进程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#skill-向选定的进程发送信号冻结进程"}},[a._v("#")]),a._v(" skill - 向选定的进程发送信号冻结进程")]),a._v(" "),s("p",[a._v("skill命令 用于向选定的进程发送信号，冻结进程。这个命令初学者并不常用，深入之后牵涉到系统服务优化之后可能会用到。")]),a._v(" "),s("h2",{attrs:{id:"适用范围"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#适用范围"}},[a._v("#")]),a._v(" 适用范围")]),a._v(" "),s("div",{staticClass:"svg redhat"},[a._v("RedHat")]),a._v(" "),s("div",{staticClass:"svg rhel"},[a._v("RHEL")]),a._v(" "),s("div",{staticClass:"svg ubuntu"},[a._v("Ubuntu")]),a._v(" "),s("div",{staticClass:"svg centos"},[a._v("CentOS")]),a._v(" "),s("div",{staticClass:"svg debian"},[a._v("Debian")]),a._v(" "),s("div",{staticClass:"svg deepin"},[a._v("Deepin")]),a._v(" "),s("div",{staticClass:"svg suse"},[a._v("SUSE")]),a._v(" "),s("div",{staticClass:"svg opensuse"},[a._v("openSUSE")]),a._v(" "),s("div",{staticClass:"svg fedora"},[a._v("Fedora")]),a._v(" "),s("div",{staticClass:"svg linuxmint"},[a._v("Linux Mint")]),a._v(" "),s("div",{staticClass:"svg alpinelinux"},[a._v("Alpine Linux")]),a._v(" "),s("div",{staticClass:"svg archlinux"},[a._v("Arch Linux")]),a._v(" "),s("h2",{attrs:{id:"语法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[a._v("#")]),a._v(" 语法")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("skill  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OPTION"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),s("h2",{attrs:{id:"选项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#选项"}},[a._v("#")]),a._v(" 选项")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 快速模式；")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 交互模式，每一步操作都需要确认；")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 冗余模式；")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-w")]),a._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 激活模式；")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-V")]),a._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 显示版本号；")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 指定开启进程的终端号；")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-u")]),a._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 指定开启进程的用户；")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 指定进程的id号；")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 指定开启进程的指令名称。")]),a._v("\n")])])]),s("h2",{attrs:{id:"举例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#举例"}},[a._v("#")]),a._v(" 举例")]),a._v(" "),s("p",[a._v("如果您发现了一个占用大量CPU和内存的进程，但又不想停止它，该怎么办？考虑下面的top命令输出：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("top")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("16514")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("23")]),a._v(":00:44  up "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("12")]),a._v(" days,  "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(":04,  "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("4")]),a._v(" users,  load average: "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.47")]),a._v(", "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.35")]),a._v(", "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.31")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" processes: "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" sleeping, "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" running, "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" zombie, "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" stopped\nCPU states:  cpu    user    "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("nice")]),a._v("  system    irq  softirq  iowait    idle\n           total    "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),a._v("%    "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.6")]),a._v("%    "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8.7")]),a._v("%   "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2.2")]),a._v("%     "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),a._v("%   "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("88.3")]),a._v("%    "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),a._v("%\nMem:  1026912k av, 1010476k used,   16436k free,       0k shrd,   52128k buff\n                    766724k actv,  143128k in_d,   14264k in_c\nSwap: 2041192k av,   83160k used, 1958032k "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("free")]),a._v("                  799432k cached\n\n  PID "),s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("USER")]),a._v("     PRI  NI  SIZE  RSS SHARE "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("stat")]),a._v(" %CPU %MEM   "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("time")]),a._v(" CPU "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("command")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("16514")]),a._v(" oracle    "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("19")]),a._v("   "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("4")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("28796")]),a._v("  26M "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("20252")]),a._v(" D N   "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("7.0")]),a._v("  "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2.5")]),a._v("   "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(":03   "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" oraclePRODB2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n")])])]),s("p",[a._v("既然您确认进程16514占用了大量内存，您就可以使用skill命令“冻结”它，而不是停止它。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("skill "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-STOP")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n")])])]),s("p",[a._v("之后，检查top输出：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("23:01:11  up 12 days,  2:05,  4 users,  load average: 1.20, 0.54, 0.38\n1 processes: 0 sleeping, 0 running, 0 zombie, 1 stopped\nCPU states:  cpu    user    nice  system    irq  softirq  iowait    idle\n           total    2.3%    0.0%    0.3%   0.0%     0.0%    2.3%   94.8%\nMem:  1026912k av, 1008756k used,   18156k free,       0k shrd,    3976k buff\n                    770024k actv,  143496k in_d,   12876k in_c\nSwap: 2041192k av,   83152k used, 1958040k free                  851200k cached\n\n  PID USER     PRI  NI  SIZE  RSS SHARE STAT %CPU %MEM   TIME CPU COMMAND\n16514 oracle    19   4 28796  26M 20252 T N   0.0  2.5   0:04   0 oraclePRODB2...\n")])])]),s("p",[a._v("现在，CPU 从 0% 空闲变为 94% 空闲。该进程被有效冻结。过一段时间之后，您可能希望唤醒该进程：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("skill "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-CONT")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("16514")]),a._v("\n")])])]),s("p",[a._v("如果希望暂时冻结进程以便为完成更重要的进程腾出空间，该方法非常有用。")]),a._v(" "),s("p",[a._v('此命令用途很广。如果您要停止 "oracle" 用户的所有进程，只需要一个命令即可实现：')]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("skill "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-STOP")]),a._v(" oracle\n")])])]),s("p",[a._v("可以使用用户、PID、命令或终端 id 作为参数。以下命令可停止所有 rman 命令。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("skill "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-STOP")]),a._v(" rman\n")])])]),s("p",[a._v('如您所见，skill 决定您输入的参数（进程 ID、用户 ID 或命令）并进行相应操作。这可能会导致在某些情况下出现这样的问题：您可能具有同名的用户和命令。最好的示例是 "oracle" 进程，通常由用户 "oracle" 运行。因此，当您希望停止名为 "oracle" 的进程时，可执行以下命令：')]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("skill "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-STOP")]),a._v(" oracle\n")])])]),s("p",[a._v('用户 "oracle" 的所有进程都停止，包括您可能要使用的会话。要非常明确地执行命令，您可以选择使用一个新参数指定参数的类型。要停止一个名为 oracle 的命令，可执行以下命令：')]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("skill "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-STOP")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v(" oracle\n")])])]),s("p",[a._v("snice命令的功能与skill类似。但它用于降低进程的优先级，而不是停止进程。首先，检查 top 输出：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("  PID USER     PRI  NI  SIZE  RSS SHARE STAT %CPU %MEM   TIME CPU COMMAND\n    3 root      15   0     0    0     0 RW    0.0  0.0   0:00   0 kapmd\n13680 oracle    15   0 11336  10M  8820 T     0.0  1.0   0:00   0 oracle\n13683 oracle    15   0  9972 9608  7788 T     0.0  0.9   0:00   0 oracle\n13686 oracle    15   0  9860 9496  7676 T     0.0  0.9   0:00   0 oracle\n13689 oracle    15   0 10004 9640  7820 T     0.0  0.9   0:00   0 oracle\n13695 oracle    15   0  9984 9620  7800 T     0.0  0.9   0:00   0 oracle\n13698 oracle    15   0 10064 9700  7884 T     0.0  0.9   0:00   0 oracle\n13701 oracle    15   0 22204  21M 16940 T     0.0  2.1   0:00   0 oracle\n")])])]),s("p",[a._v('现在，将 "oracle" 进程的优先级降低四个点。注意，该值越高，优先级越低。')]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("snice +4 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-u")]),a._v(" oracle\n  PID "),s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("USER")]),a._v("     PRI  NI  SIZE  RSS SHARE STAT %CPU %MEM   TIME CPU COMMAND\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("16894")]),a._v(" oracle    "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("20")]),a._v("   "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("4")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("38904")]),a._v("  32M "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("26248")]),a._v(" D N   "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5.5")]),a._v("  "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3.2")]),a._v("   "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(":01   "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" oracle\n")])])]),s("p",[a._v("注意，NI 列（nice 值）现在是 4，优先级现在设置为 20，而不是 15。这对于降低优先级非常有帮助。")])])}),[],!1,null,null,null);s.default=r.exports}}]);