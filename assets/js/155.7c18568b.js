(window.webpackJsonp=window.webpackJsonp||[]).push([[155],{477:function(a,t,s){"use strict";s.r(t);var e=s(14),r=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"iptables-linux上常用的防火墙软件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#iptables-linux上常用的防火墙软件"}},[a._v("#")]),a._v(" iptables - Linux上常用的防火墙软件")]),a._v(" "),t("p",[a._v("iptables命令 是Linux上常用的防火墙软件，是netfilter项目的一部分。可以直接配置，也可以通过许多前端和图形界面配置。")]),a._v(" "),t("p",[a._v("iptables指令用来设置Linux内核的ip过滤规则以及管理nat功能。iptables用于在Linux内核中设置、维护和检查IPv4数据包过滤规则表。可以定义几个不同的表。每个表包含许多内置链，也可能包含用户定义的链。每个链都是一个规则列表，可以匹配一组数据包。每条规则都指定如何处理匹配的数据包。这被称为“目标”，它可能是跳转到同一表中的用户定义链。")]),a._v(" "),t("h2",{attrs:{id:"适用范围"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#适用范围"}},[a._v("#")]),a._v(" 适用范围")]),a._v(" "),t("div",{staticClass:"svg redhat"},[a._v("RedHat")]),a._v(" "),t("div",{staticClass:"svg rhel"},[a._v("RHEL")]),a._v(" "),t("div",{staticClass:"svg ubuntu"},[a._v("Ubuntu")]),a._v(" "),t("div",{staticClass:"svg centos"},[a._v("CentOS")]),a._v(" "),t("div",{staticClass:"svg debian"},[a._v("Debian")]),a._v(" "),t("div",{staticClass:"svg deepin"},[a._v("Deepin")]),a._v(" "),t("div",{staticClass:"svg suse"},[a._v("SUSE")]),a._v(" "),t("div",{staticClass:"svg opensuse"},[a._v("openSUSE")]),a._v(" "),t("div",{staticClass:"svg fedora"},[a._v("Fedora")]),a._v(" "),t("div",{staticClass:"svg linuxmint"},[a._v("Linux Mint")]),a._v(" "),t("div",{staticClass:"svg alpinelinux"},[a._v("Alpine Linux")]),a._v(" "),t("div",{staticClass:"svg archlinux"},[a._v("Arch Linux")]),a._v(" "),t("h2",{attrs:{id:"语法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[a._v("#")]),a._v(" 语法")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("iptables  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-t table"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("-A"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("-D"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("  chain  rule-specification\niptables  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-t table"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-I")]),a._v("  chain  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("rulenum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("  rule-specification\niptables  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-t table"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-R")]),a._v("  chain  rulenum  rule-specification\niptables  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-t table"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-D")]),a._v("  chain  rulenum\niptables  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-t table"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-S")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("chain "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("rulenum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\niptables  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-t table"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("-F"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("-L"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("-Z"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("chain "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("rulenum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("options"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\niptables  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-t table"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-N")]),a._v("  chain\niptables  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-t table"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-X")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("chain"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\niptables  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-t table"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-P")]),a._v("  chain  target\niptables  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-t table"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-E")]),a._v("  old-chain-name  new-chain-name  rule-specification "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("matches"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("target"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\nmatch "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" matchname "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("per-match-options"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("  target "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" targetname "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("per-target-options"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("p",[a._v("目前Linux内核支持3个相互独立的表：filter，过滤ip数据包；nat，配置nat功能；mangle，修改ip数据包。")]),a._v(" "),t("p",[a._v("filter是默认表，包含INPUT（发送给本机） 、OUTPUT（本机向外发送）、FORWARD（被路由出去）三个链。")]),a._v(" "),t("p",[a._v("nat表包含PREROUTING（修改刚收到的数据包） 、OUTPUT（在路由之前处理本机产生的数据包） 、POSTROUTING（修改将要发送的数据包）三个链。")]),a._v(" "),t("p",[a._v("mangle表包含PREROUTING（路由之前，修改收到的包） 、OUTPUT（路由之前，修改本机产生的包） 、INPUT（修改发送到本机的包） 、FORWARD （修改路由之后的包） 、POSTROUTING（修改将被本机发送的包）五个链。")]),a._v(" "),t("p",[a._v("Linux系统中的内置目标包括：ACCEPT（允许数据包通过） DROP（丢弃数据包） QUEUE（传递包到用户空间） RETURN（停止向后检测其他的规则，返回之前的条用规则处）")]),a._v(" "),t("h2",{attrs:{id:"选项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#选项"}},[a._v("#")]),a._v(" 选项")]),a._v(" "),t("h3",{attrs:{id:"基本参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基本参数"}},[a._v("#")]),a._v(" 基本参数")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-P")]),a._v("\t             "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 设置默认策略:iptables -P INPUT (DROP")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-F")]),a._v("\t             "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 清空规则链")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-L")]),a._v("\t             "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看规则链")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v("\t             "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 在规则链的末尾加入新规则")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-I")]),a._v("\t             "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# num 在规则链的头部加入新规则")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-D")]),a._v("\t             "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# num 删除某一条规则")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v("\t             "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v('# 匹配来源地址IP/MASK，加叹号"!"表示除这个IP外。')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v("\t             "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 匹配目标地址")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v("\t             "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 网卡名称 匹配从这块网卡流入的数据")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v("\t             "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 网卡名称 匹配从这块网卡流出的数据")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v("\t             "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 匹配协议,如tcp,udp,icmp")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dport")]),a._v(" num\t     "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 匹配目标端口号")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--sport")]),a._v(" num\t     "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 匹配来源端口号")]),a._v("\n")])])]),t("h3",{attrs:{id:"命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#命令"}},[a._v("#")]),a._v(" 命令")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" table                                         "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 指定要管理的表")]),a._v("\n-A, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--append")]),a._v(" chain rule-specification            "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 追加记录")]),a._v("\n-D, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--delete")]),a._v(" chain rule-specification            "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 删除记录")]),a._v("\n-I, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--insert")]),a._v(" chain "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("rulenum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" rule-specification  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 插入记录")]),a._v("\n-R, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--replace")]),a._v(" chain "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("rulenum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" rule-specification "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 替换记录")]),a._v("\n-L, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--list")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("chain"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("                               "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 列出记录")]),a._v("\n-S, --list-rules "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("chain"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("                         "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 列出已选择链的所有规则。如果没有选择任何链，则所有链都打印")]),a._v("\n-F, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--flush")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("chain"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("                              "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 删除指定的记录")]),a._v("\n-Z, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--zero")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("chain "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("rulenum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("                     "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 将数据计数和字节计数清零")]),a._v("\n-N, --new-chain chain                            "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 用户自定义新链")]),a._v("\n-X, --delete-chain "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("chain"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("                       "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 删除用户自定义链")]),a._v("\n-P, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--policy")]),a._v(" chain target                        "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 为指定的链设置策略")]),a._v("\n-E, --rename-chain old new                       "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 重命名链")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-h")]),a._v("                                               "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 显示帮助信息")]),a._v("\n")])])]),t("h3",{attrs:{id:"参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[a._v("#")]),a._v(" 参数")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" –p, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--protocol")]),a._v(" protocol               "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 指定协议类型tcp、udp、icmp、all，协议前加！标识否定")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" –s, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--source")]),a._v(" address"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("/mask"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(",…        "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 源地址")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" –d, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--destination")]),a._v(" address"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("/mask"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(",…   "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 目标")]),a._v("\n-j, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--jump")]),a._v("                                "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 指定跳转的目标")]),a._v("\n-g, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--goto")]),a._v(" chain                          "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 这指定应在用户指定的链中继续处理。与“--jump”选项不同，返回将不再在此链中继续处理，而是在通过“--jump”调用我们的链中继续处理。")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" –i, --in-interface name               "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 接收数据包的接口名称(仅用于输入、转发和PREROUTING链的数据包)。当“！”参数在接口名称之前使用，意义被倒置。如果接口名以“+”结尾，则以此名称开头的任何接口都将匹配。如果省略此选项，则任何接口名称都将匹配。")]),a._v("\n-o, --out-interface name                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 指定数据包离开的网络接口")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" –f, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--fragment")]),a._v("                        "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 这意味着该规则仅指分段数据包的第二段和更多的片段。")]),a._v("\n-c, --set-counters packets bytes          "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 这使管理员能够初始化规则的数据包和字节计数器(在插入、追加、替换操作期间)。")]),a._v("\n")])])]),t("h3",{attrs:{id:"其他选项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#其他选项"}},[a._v("#")]),a._v(" 其他选项")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("-v, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--verbose")]),a._v("                             "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 冗长的输出，该选项使List命令显示接口名称、规则选项(如果有的话)和TOS掩码。还列出了数据包计数器和字节计数器")]),a._v("\n-n, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--numeric")]),a._v("                             "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 数字输出IP地址和端口号将以数字格式打印。默认情况下，程序将尝试将它们显示为主机名、网络名称或服务(只要适用)。")]),a._v("\n-x, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--exact")]),a._v("                               "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 扩大数字。显示数据包和字节计数器的确切值，而不是只显示K‘s(1000倍)M’s(1000 K倍数)或G‘s(1000 m倍数)中的四舍五入数。此选项仅与-L命令相关。")]),a._v("\n--line-numbers                            "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 当列出规则时，将行号添加到每条规则的开头，对应于该规则在链中的位置。")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--modprobe")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("command                        "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 在向链中添加或插入规则时，使用命令加载任何必要的模块(目标、匹配扩展等)")]),a._v("\n")])])]),t("h2",{attrs:{id:"举例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#举例"}},[a._v("#")]),a._v(" 举例")]),a._v(" "),t("h3",{attrs:{id:"清空当前的所有规则和计数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#清空当前的所有规则和计数"}},[a._v("#")]),a._v(" 清空当前的所有规则和计数")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("iptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-F")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 清空所有的防火墙规则")]),a._v("\niptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-X")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 删除用户自定义的空链")]),a._v("\niptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Z")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 清空计数")]),a._v("\n")])])]),t("h3",{attrs:{id:"配置允许ssh端口连接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置允许ssh端口连接"}},[a._v("#")]),a._v(" 配置允许ssh端口连接")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("iptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" INPUT "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".1.0/24 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tcp "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dport")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("22")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 22为你的ssh端口， -s 192.168.1.0/24表示允许这个网段的机器来连接，其它网段的ip地址是登陆不了你的机器的。 -j ACCEPT表示接受这样的请求")]),a._v("\n")])])]),t("h3",{attrs:{id:"允许本地回环地址可以正常使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#允许本地回环地址可以正常使用"}},[a._v("#")]),a._v(" 允许本地回环地址可以正常使用")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("iptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" INPUT "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" lo "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#本地圆环地址就是那个127.0.0.1，是本机上使用的,它进与出都设置为允许")]),a._v("\niptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" OUTPUT "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" lo "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n")])])]),t("h3",{attrs:{id:"设置默认的规则"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置默认的规则"}},[a._v("#")]),a._v(" 设置默认的规则")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("iptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-P")]),a._v(" INPUT DROP "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 配置默认的不让进")]),a._v("\niptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-P")]),a._v(" FORWARD DROP "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 默认的不允许转发")]),a._v("\niptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-P")]),a._v(" OUTPUT ACCEPT "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 默认的可以出去")]),a._v("\n")])])]),t("h3",{attrs:{id:"配置白名单"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置白名单"}},[a._v("#")]),a._v(" 配置白名单")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("iptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" INPUT "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" all "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".1.0/24 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 允许机房内网机器可以访问")]),a._v("\niptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" INPUT "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" all "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".140.0/24 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 允许机房内网机器可以访问")]),a._v("\niptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" INPUT "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tcp "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("183.121")]),a._v(".3.7 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dport")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3380")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 允许183.121.3.7访问本机的3380端口")]),a._v("\n")])])]),t("h3",{attrs:{id:"开启相应的服务端口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开启相应的服务端口"}},[a._v("#")]),a._v(" 开启相应的服务端口")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("iptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" INPUT "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tcp "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dport")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 开启80端口，因为web对外都是这个端口")]),a._v("\niptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" INPUT "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" icmp --icmp-type "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 允许被ping")]),a._v("\niptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" INPUT "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" state "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--state")]),a._v(" ESTABLISHED,RELATED "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 已经建立的连接得让它进来")]),a._v("\n")])])]),t("h3",{attrs:{id:"保存规则到配置文件中"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#保存规则到配置文件中"}},[a._v("#")]),a._v(" 保存规则到配置文件中")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" /etc/sysconfig/iptables /etc/sysconfig/iptables.bak "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 任何改动之前先备份，请保持这一优秀的习惯")]),a._v("\niptables-save "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" /etc/sysconfig/iptables\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v(" /etc/sysconfig/iptables\n")])])]),t("h3",{attrs:{id:"列出已设置的规则"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#列出已设置的规则"}},[a._v("#")]),a._v(" 列出已设置的规则")]),a._v(" "),t("blockquote",[t("p",[a._v("iptables -L [-t 表名] [链名]")])]),a._v(" "),t("ul",[t("li",[a._v("四个表名 "),t("code",[a._v("raw")]),a._v("，"),t("code",[a._v("nat")]),a._v("，"),t("code",[a._v("filter")]),a._v("，"),t("code",[a._v("mangle")])]),a._v(" "),t("li",[a._v("五个规则链名 "),t("code",[a._v("INPUT")]),a._v("、"),t("code",[a._v("OUTPUT")]),a._v("、"),t("code",[a._v("FORWARD")]),a._v("、"),t("code",[a._v("PREROUTING")]),a._v("、"),t("code",[a._v("POSTROUTING")])]),a._v(" "),t("li",[a._v("filter表包含"),t("code",[a._v("INPUT")]),a._v("、"),t("code",[a._v("OUTPUT")]),a._v("、"),t("code",[a._v("FORWARD")]),a._v("三个规则链")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("iptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-L")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" nat                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 列出 nat 上面的所有规则")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#            ^ -t 参数指定，必须是 raw， nat，filter，mangle 中的一个")]),a._v("\niptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-L")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" nat  --line-numbers  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 规则带编号")]),a._v("\niptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-L")]),a._v(" INPUT\n\niptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-L")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-nv")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看，这个列表看起来更详细")]),a._v("\n")])])]),t("h3",{attrs:{id:"清除已有规则"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#清除已有规则"}},[a._v("#")]),a._v(" 清除已有规则")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("iptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-F")]),a._v(" INPUT  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 清空指定链 INPUT 上面的所有规则")]),a._v("\niptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-X")]),a._v(" INPUT  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 删除指定的链，这个链必须没有被其它任何规则引用，而且这条上必须没有任何规则。")]),a._v("\n                   "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 如果没有指定链名，则会删除该表中所有非内置的链。")]),a._v("\niptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Z")]),a._v(" INPUT  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 把指定链，或者表中的所有链上的所有计数器清零。")]),a._v("\n")])])]),t("h3",{attrs:{id:"删除已添加的规则"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除已添加的规则"}},[a._v("#")]),a._v(" 删除已添加的规则")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 添加一条规则")]),a._v("\niptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" INPUT "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".1.5 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" DROP\n")])])]),t("p",[a._v("将所有iptables以序号标记显示，执行：")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("iptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-L")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" --line-numbers\n")])])]),t("p",[a._v("比如要删除INPUT里序号为8的规则，执行：")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("iptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-D")]),a._v(" INPUT "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8")]),a._v("\n")])])]),t("h3",{attrs:{id:"开放指定的端口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开放指定的端口"}},[a._v("#")]),a._v(" 开放指定的端口")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("iptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" INPUT "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT               "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#允许本地回环接口(即运行本机访问本机)")]),a._v("\niptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" INPUT "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" state "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--state")]),a._v(" ESTABLISHED,RELATED "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#允许已建立的或相关连的通行")]),a._v("\niptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" OUTPUT "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT         "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#允许所有本机向外的访问")]),a._v("\niptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" INPUT "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tcp "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dport")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("22")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#允许访问22端口")]),a._v("\niptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" INPUT "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tcp "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dport")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#允许访问80端口")]),a._v("\niptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" INPUT "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tcp "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dport")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("21")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#允许ftp服务的21端口")]),a._v("\niptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" INPUT "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tcp "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dport")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("20")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#允许FTP服务的20端口")]),a._v("\niptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" INPUT "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" reject       "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#禁止其他未允许的规则访问")]),a._v("\niptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" FORWARD "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" REJECT     "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#禁止其他未允许的规则访问")]),a._v("\n")])])]),t("h3",{attrs:{id:"屏蔽ip"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#屏蔽ip"}},[a._v("#")]),a._v(" 屏蔽IP")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("iptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" INPUT "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tcp "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" tcp "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".0.8 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" DROP  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 屏蔽恶意主机（比如，192.168.0.8")]),a._v("\niptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-I")]),a._v(" INPUT "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("123.45")]),a._v(".6.7 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" DROP       "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#屏蔽单个IP的命令")]),a._v("\niptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-I")]),a._v(" INPUT "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("123.0")]),a._v(".0.0/8 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" DROP      "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#封整个段即从123.0.0.1到123.255.255.254的命令")]),a._v("\niptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-I")]),a._v(" INPUT "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("124.45")]),a._v(".0.0/16 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" DROP    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#封IP段即从123.45.0.1到123.45.255.254的命令")]),a._v("\niptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-I")]),a._v(" INPUT "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("123.45")]),a._v(".6.0/24 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" DROP    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#封IP段即从123.45.6.1到123.45.6.254的命令是")]),a._v("\n")])])]),t("h3",{attrs:{id:"指定数据包出去的网络接口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#指定数据包出去的网络接口"}},[a._v("#")]),a._v(" 指定数据包出去的网络接口")]),a._v(" "),t("p",[a._v("只对 OUTPUT，FORWARD，POSTROUTING 三个链起作用。")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("iptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" FORWARD "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" eth0\n")])])]),t("h3",{attrs:{id:"查看已添加的规则"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看已添加的规则"}},[a._v("#")]),a._v(" 查看已添加的规则")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("iptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-L")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v("\nChain INPUT "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("policy DROP "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("48106")]),a._v(" packets, 2690K bytes"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n pkts bytes target     prot opt "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v("     out     "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("source")]),a._v("               destination\n "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("5075")]),a._v("  589K ACCEPT     all  --  lo     *       "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),a._v(".0.0/0            "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),a._v(".0.0/0\n 191K   90M ACCEPT     tcp  --  *      *       "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),a._v(".0.0/0            "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),a._v(".0.0/0           tcp dpt:22\n1499K  133M ACCEPT     tcp  --  *      *       "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),a._v(".0.0/0            "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),a._v(".0.0/0           tcp dpt:80\n4364K 6351M ACCEPT     all  --  *      *       "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),a._v(".0.0/0            "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),a._v(".0.0/0           state RELATED,ESTABLISHED\n "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("6256")]),a._v("  327K ACCEPT     icmp --  *      *       "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),a._v(".0.0/0            "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),a._v(".0.0/0\n\nChain FORWARD "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("policy ACCEPT "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" packets, "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" bytes"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n pkts bytes target     prot opt "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v("     out     "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("source")]),a._v("               destination\n\nChain OUTPUT "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("policy ACCEPT 3382K packets, 1819M bytes"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n pkts bytes target     prot opt "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v("     out     "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("source")]),a._v("               destination\n "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("5075")]),a._v("  589K ACCEPT     all  --  *      lo      "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),a._v(".0.0/0            "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),a._v(".0.0/0\n")])])]),t("h3",{attrs:{id:"启动网络转发规则"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动网络转发规则"}},[a._v("#")]),a._v(" 启动网络转发规则")]),a._v(" "),t("p",[a._v("公网"),t("code",[a._v("210.14.67.7")]),a._v("让内网"),t("code",[a._v("192.168.188.0/24")]),a._v("上网")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("iptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" nat "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" POSTROUTING "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".188.0/24 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" SNAT --to-source "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("210.14")]),a._v(".67.127\n")])])]),t("h3",{attrs:{id:"端口映射"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#端口映射"}},[a._v("#")]),a._v(" 端口映射")]),a._v(" "),t("p",[a._v("本机的 2222 端口映射到内网 虚拟机的22 端口")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("iptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" nat "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" PREROUTING "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("210.14")]),a._v(".67.127 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tcp "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dport")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2222")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" DNAT --to-dest "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".188.115:22\n")])])]),t("h3",{attrs:{id:"字符串匹配"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#字符串匹配"}},[a._v("#")]),a._v(" 字符串匹配")]),a._v(" "),t("p",[a._v("比如，我们要过滤所有TCP连接中的字符串"),t("code",[a._v("test")]),a._v("，一旦出现它我们就终止这个连接，我们可以这么做：")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("iptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" INPUT "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tcp "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" string "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--algo")]),a._v(" kmp "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--string")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"test"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" REJECT --reject-with tcp-reset\niptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-L")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Chain INPUT (policy ACCEPT)")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# target     prot opt source               destination")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v('# REJECT     tcp  --  anywhere             anywhere            STRING match "test" ALGO name kmp TO 65535 reject-with tcp-reset')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Chain FORWARD (policy ACCEPT)")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# target     prot opt source               destination")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Chain OUTPUT (policy ACCEPT)")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# target     prot opt source               destination")]),a._v("\n")])])]),t("h3",{attrs:{id:"阻止windows蠕虫的攻击"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#阻止windows蠕虫的攻击"}},[a._v("#")]),a._v(" 阻止Windows蠕虫的攻击")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("iptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-I")]),a._v(" INPUT "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" DROP "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tcp "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),a._v(".0.0/0 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" string "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--algo")]),a._v(" kmp "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--string")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"cmd.exe"')]),a._v("\n")])])]),t("h3",{attrs:{id:"防止syn洪水攻击"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#防止syn洪水攻击"}},[a._v("#")]),a._v(" 防止SYN洪水攻击")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("iptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" INPUT "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tcp "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--syn")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" limit "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--limit")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("5")]),a._v("/second "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" ACCEPT\n")])])]),t("h3",{attrs:{id:"添加secmark记录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加secmark记录"}},[a._v("#")]),a._v(" 添加SECMARK记录")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("iptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" mangle "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" INPUT "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tcp "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--src")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".1.2 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dport")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("443")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" SECMARK "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--selctx")]),a._v(" system_u:object_r:myauth_packet_t\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 向从 192.168.1.2:443 以TCP方式发出到本机的包添加MAC安全上下文 system_u:object_r:myauth_packet_t")]),a._v("\n")])])]),t("p",[a._v("显示filter表的记录")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("$ iptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" filter –L    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#显示指定表的记录")]),a._v("\nChain INPUT "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("policy ACCEPT"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\ntarget     prot opt "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("source")]),a._v("               destination        \nACCEPT     all  --  anywhere             anywhere            state RELATED,ESTABLISHED\nACCEPT     icmp --  anywhere             anywhere                  \n…\nChain FORWARD "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("policy ACCEPT"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\ntarget     prot opt "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("source")]),a._v("               destination        \nACCEPT     all  --  anywhere             anywhere            state RELATED,ESTABLISHED\nACCEPT     icmp --  anywhere             anywhere           \n…\nChain OUTPUT "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("policy ACCEPT"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\ntarget     prot opt "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("source")]),a._v("               destination\n")])])]),t("p",[a._v("禁止端口135的tcp数据包")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("$ iptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" filter "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" INPUT "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" tcp "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dport")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("135")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" DROP  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#添加记录，忽略135端口的tcp数据包 ")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("$ iptables –L      "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#查看表，已经加入规则")]),a._v("\nChain INPUT "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("policy ACCEPT"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\ntarget     prot opt "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("source")]),a._v("               destination        \nACCEPT     all  --  anywhere             anywhere            state RELATED,ESTABLISHED\nDROP       tcp  --  anywhere             anywhere            tcp dpt:epmap\n")])])]),t("p",[a._v("禁止目标地址访问本机")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("$ iptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" INPUT "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".1.110 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" DROP   "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#禁止110地址访问本机")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("$ iptables "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-L")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" DROP                       "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#查看filter表，已经添加记录")]),a._v("\nDROP       tcp  --  anywhere             anywhere            tcp dpt:epmap\nDROP       all  --  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".1.110        anywhere   \n")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);