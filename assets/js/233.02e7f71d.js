(window.webpackJsonp=window.webpackJsonp||[]).push([[233],{549:function(a,s,t){"use strict";t.r(s);var n=t(14),e=Object(n.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"pwck-用来验证系统认证文件内容和格式的完整性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pwck-用来验证系统认证文件内容和格式的完整性"}},[a._v("#")]),a._v(" pwck - 用来验证系统认证文件内容和格式的完整性")]),a._v(" "),s("p",[a._v("pwck命令 用来验证系统认证文件/etc/passwd和/etc/shadow的内容和格式的完整性。")]),a._v(" "),s("p",[a._v("检查用户密码文件“/etc/passwd”和“/etc/shadow”的完整性，将验证结果送到标砖输出。提示用户删除格式不正确或有其他不可更正错误的条目。检查以验证每个条目是否具有：正确的字段数、唯一有效的用户名、有效的用户和组标识符、有效的主组、有效的家目录、有效的登录shell。")]),a._v(" "),s("p",[a._v("当指定了第二个文件参数或系统上存在“/etc/shadow”时，就启用了shadow检查。它会检查一下信息：每个passwd条目都有一个匹配的阴影条目，每个影子条目都有一个匹配的passwd条目，在shadow文件中指定了密码，阴影条目有正确的字段数，阴影条目在shadow中是唯一的，最近的密码更改不会在将来发生。")]),a._v(" "),s("p",[a._v("检查正确的字段数和唯一用户名是致命的。如果条目有错误的字段数，则会提示用户删除整行。如果用户没有肯定地回答，所有进一步的检查都会被绕过。提示删除具有重复用户名的条目，但仍将进行其余检查。所有其他错误都是警告，并鼓励用户运行usermod命令来更正错误。")]),a._v(" "),s("h2",{attrs:{id:"适用范围"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#适用范围"}},[a._v("#")]),a._v(" 适用范围")]),a._v(" "),s("div",{staticClass:"svg redhat"},[a._v("RedHat")]),a._v(" "),s("div",{staticClass:"svg rhel"},[a._v("RHEL")]),a._v(" "),s("div",{staticClass:"svg ubuntu"},[a._v("Ubuntu")]),a._v(" "),s("div",{staticClass:"svg centos"},[a._v("CentOS")]),a._v(" "),s("div",{staticClass:"svg debian"},[a._v("Debian")]),a._v(" "),s("div",{staticClass:"svg deepin"},[a._v("Deepin")]),a._v(" "),s("div",{staticClass:"svg suse"},[a._v("SUSE")]),a._v(" "),s("div",{staticClass:"svg opensuse"},[a._v("openSUSE")]),a._v(" "),s("div",{staticClass:"svg fedora"},[a._v("Fedora")]),a._v(" "),s("div",{staticClass:"svg linuxmint"},[a._v("Linux Mint")]),a._v(" "),s("div",{staticClass:"svg alpinelinux"},[a._v("Alpine Linux")]),a._v(" "),s("div",{staticClass:"svg archlinux"},[a._v("Arch Linux")]),a._v(" "),s("h2",{attrs:{id:"语法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[a._v("#")]),a._v(" 语法")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("pwck  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("选项"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" \n")])])]),s("h2",{attrs:{id:"选项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#选项"}},[a._v("#")]),a._v(" 选项")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-q")]),a._v("                               "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 仅显示报错信息")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-r")]),a._v("                               "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 以只读模式执行")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v("                               "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 使用UID作为文件的排序依据")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--help")]),a._v("                           "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 显示帮助文档")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--version")]),a._v("                        "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 显示命令版本信息")]),a._v("\n")])])]),s("h2",{attrs:{id:"配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[a._v("#")]),a._v(" 配置")]),a._v(" "),s("p",[a._v("下面“/etc/login.defs“中的配置变量更改了该工具的行为：")]),a._v(" "),s("p",[s("strong",[a._v("PASS_MAX_DAYS")]),a._v("，可以使用密码的最大天数。如果密码早于此，则将强制进行密码更改。如果没有指定，将假定-1(这将禁用限制)。")]),a._v(" "),s("p",[s("strong",[a._v("PASS_MIN_DAYS")]),a._v("，密码更改之间允许的最短天数。任何密码更改尝试比这更早将被拒绝。如果未指定，则假定为-1(这将禁用限制)")]),a._v(" "),s("p",[s("strong",[a._v("PASS_WARN_AGE")]),a._v("，在密码过期前发出警告的天数。零表示警告只在到期之日发出，负值表示没有发出警告。如未指定，则不会提供警告。")]),a._v(" "),s("h2",{attrs:{id:"相关文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#相关文件"}},[a._v("#")]),a._v(" 相关文件")]),a._v(" "),s("ul",[s("li",[s("code",[a._v("/etc/group")]),a._v("组账户信息。")]),a._v(" "),s("li",[s("code",[a._v("/etc/passwd")]),a._v("用户账户信息。")]),a._v(" "),s("li",[s("code",[a._v("/etc/shadow")]),a._v("安全用户帐户信息。")])]),a._v(" "),s("h2",{attrs:{id:"返回值"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#返回值"}},[a._v("#")]),a._v(" 返回值")]),a._v(" "),s("ul",[s("li",[s("code",[a._v("0")]),a._v(" 成功")]),a._v(" "),s("li",[s("code",[a._v("1")]),a._v(" 无效的命令")]),a._v(" "),s("li",[s("code",[a._v("2")]),a._v(" 1个或多个密码出错")]),a._v(" "),s("li",[s("code",[a._v("3")]),a._v(" 无法打开密码文件")]),a._v(" "),s("li",[s("code",[a._v("4")]),a._v(" 不能锁定密码文件")]),a._v(" "),s("li",[s("code",[a._v("5")]),a._v(" 不能更新密码文件")]),a._v(" "),s("li",[s("code",[a._v("6")]),a._v(" 无法排序密码文件")])]),a._v(" "),s("h2",{attrs:{id:"举例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#举例"}},[a._v("#")]),a._v(" 举例")]),a._v(" "),s("p",[a._v("普通用户调用pwck")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("sogrey@bogon ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" pwck "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看密码文件")]),a._v("\n用户“ftp”：目录 /var/ftp 不存在\n用户“saslauth”：目录 /run/saslauthd 不存在\n用户“gluster”：目录 /var/run/gluster 不存在\n用户“pulse”：目录 /var/run/pulse 不存在\n用户“gnome-initial-setup”：目录 /run/gnome-initial-setup/ 不存在\n用户“avahi”：目录 /var/run/avahi-daemon 不存在\n用户“vboxadd”：目录 /var/run/vboxadd 不存在\npwck：无改变\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("sogrey@bogon ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("$ "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$?")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#打印返回值，这个返回值在shell变量“#？”中")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("sogrey@bogon ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("$ \n")])])]),s("p",[a._v("root调用pwck")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("sogrey@bogon ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@bogon ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# pwck")]),a._v("\n用户“ftp”：目录 /var/ftp 不存在\n用户“saslauth”：目录 /run/saslauthd 不存在\n用户“gluster”：目录 /var/run/gluster 不存在\n用户“pulse”：目录 /var/run/pulse 不存在\n用户“gnome-initial-setup”：目录 /run/gnome-initial-setup/ 不存在\n用户“avahi”：目录 /var/run/avahi-daemon 不存在\n用户“vboxadd”：目录 /var/run/vboxadd 不存在\npwck：无改变\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@bogon ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# pwck /etc/passwd")]),a._v("\n用户“ftp”：目录 /var/ftp 不存在\n用户“saslauth”：目录 /run/saslauthd 不存在\n用户“gluster”：目录 /var/run/gluster 不存在\n用户“pulse”：目录 /var/run/pulse 不存在\n用户“gnome-initial-setup”：目录 /run/gnome-initial-setup/ 不存在\n用户“avahi”：目录 /var/run/avahi-daemon 不存在\n用户“vboxadd”：目录 /var/run/vboxadd 不存在\npwck：无改变\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@bogon ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ")]),a._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);