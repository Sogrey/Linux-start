(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{370:function(s,t,a){"use strict";a.r(t);var n=a(14),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"chkconfig-检查或设置系统的各种服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#chkconfig-检查或设置系统的各种服务"}},[s._v("#")]),s._v(" chkconfig - 检查或设置系统的各种服务")]),s._v(" "),t("p",[s._v("chkconfig命令 检查、设置系统的各种服务。这是Red Hat公司遵循GPL规则所开发的程序，它可查询操作系统在每一个执行等级中会执行哪些系统服务，其中包括各类常驻服务。谨记chkconfig不是立即自动禁止或激活一个服务，它只是简单的改变了符号连接。")]),s._v(" "),t("p",[s._v("启动或者关闭系统服务，设置服务的运行级别，该指令并不会立刻启动或者停止服务，而是在开机的时候发生效果。")]),s._v(" "),t("p",[s._v("chkconfig提供了一个简单的命令行工具，用于维护/etc/rc[0-6].d目录层次结构，使系统管理员不必直接操作这些目录中的许多符号链接。这个chkconfig的实现受到IRIX操作系统中的chkconfig命令的启发。但是，这个版本没有在/etc/rc[0-6].d层次结构之外维护配置信息，而是直接管理/etc/rc[0-6].d中的符号链接。这将留下所有有关在单个位置启动服务init的配置信息。")]),s._v(" "),t("p",[s._v("chkconfig有五个不同的功能：添加用于管理的新服务、从管理中删除服务、列出服务的当前启动信息、更改服务的启动信息以及检查特定服务的启动状态。")]),s._v(" "),t("p",[s._v("当chkconfig后面只有一个服务名称的时候，它会检查服务是否配置为在当前运行级中启动。如果是，则chkconfig返回true；否则返回false。“--level”选项可以用来使chkconfig查询指定运行级下的服务状态，而不是当前的运行级。当使用“--list”参数运行chkconfig或根本没有参数时，将显示所有服务及其当前配置的清单。")]),s._v(" "),t("p",[s._v("如果在服务名称之后指定了on、off、reset或resetpriorities之一，则chkconfig将更改指定服务的启动信息。on和off标志将分别导致服务在被更改的运行级别中启动或停止。reset标志将服务的所有运行级别的on/off状态重置为init脚本文件中指定的样子，重置的时候会有一个询问。而resetpriorities标志则会直接将服务的on/off状态重置为init脚本中指定样子。默认情况下，on和off选项只影响运行级别2、3、4和5，而reset和resetpriorities影响所有运行级别。请注意，对于每个服务，每个运行级都有一个开始脚本或一个停止脚本。当切换runlevel时，init将不会重新启动已经启动的服务，也不会重新停止未运行的服务。")]),s._v(" "),t("p",[s._v("chkconfig还可以通过xinetd.d配置文件管理xinetd脚本，xinetd服务只支持on、off、--list。")]),s._v(" "),t("p",[s._v("chkconfig支持一个“--type”参数，当几个服务共享名字的情况下，这个选项就有效。支持该选项的服务可以是sysv和xinetd。")]),s._v(" "),t("h2",{attrs:{id:"适用范围"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#适用范围"}},[s._v("#")]),s._v(" 适用范围")]),s._v(" "),t("div",{staticClass:"svg redhat"},[s._v("RedHat")]),s._v(" "),t("div",{staticClass:"svg rhel"},[s._v("RHEL")]),s._v(" "),t("div",{staticClass:"svg ubuntu"},[s._v("Ubuntu")]),s._v(" "),t("div",{staticClass:"svg centos"},[s._v("CentOS")]),s._v(" "),t("div",{staticClass:"svg debian"},[s._v("Debian")]),s._v(" "),t("div",{staticClass:"svg deepin"},[s._v("Deepin")]),s._v(" "),t("div",{staticClass:"svg suse"},[s._v("SUSE")]),s._v(" "),t("div",{staticClass:"svg opensuse"},[s._v("openSUSE")]),s._v(" "),t("div",{staticClass:"svg fedora"},[s._v("Fedora")]),s._v(" "),t("div",{staticClass:"svg linuxmint"},[s._v("Linux Mint")]),s._v(" "),t("div",{staticClass:"svg alpinelinux"},[s._v("Alpine Linux")]),s._v(" "),t("div",{staticClass:"svg archlinux"},[s._v("Arch Linux")]),s._v(" "),t("h2",{attrs:{id:"语法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[s._v("#")]),s._v(" 语法")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("--list"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("--type type"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--add")]),s._v("  name\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--del")]),s._v("  name\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" - "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-override")]),s._v("  name\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("--level levels"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("--type type"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  name  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("on"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("off"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("reset"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("resetpriorities"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("--level levels"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("--type type"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  name\n")])])]),t("h2",{attrs:{id:"选项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#选项"}},[s._v("#")]),s._v(" 选项")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--list")]),s._v(" 服务名             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 此选项列出chkconfig所知道的所有服务，以及它们是在每个运行级别中停止还是启动。如果指定了名称，则仅显示有关服务名称的信息。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--add")]),s._v(" 服务名              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 增加服务。当添加新服务时，chkconfig确保服务在每个运行级别上都有一个启动项或一个杀死项。如果任何运行级缺少这样的条目，chkconfig将按照init脚本中的默认值创建适当的条目。请注意，“INIT INFO”部分中的默认条目优先于initscript中的默认运行级别；如果存在任何必需的启动或要求停止条目，则将调整脚本的开始和停止优先级，以考虑这些依赖项。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--del")]),s._v(" 服务名              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将服务从chkconfig管理中删除，与它相关的/etc/rc[0-6].d中的任何符号链接都被删除。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--level")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("levels"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("on"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("off"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("reset"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置指定服务在指定运行级别的开机状态，级别可以是0~6。例如: chkconfig –level 35 vsftpd on")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--override")]),s._v(" name           "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果/etc/chkconfig.d/name文件现在存在，并且与基础配置脚本不同，则更改服务名称的配置文件，而不使用基础配置。")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--help")]),s._v("                           "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示帮助文档")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--version")]),s._v("                        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示命令版本信息")]),s._v("\n")])])]),t("h2",{attrs:{id:"关于运行级别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#关于运行级别"}},[s._v("#")]),s._v(" 关于运行级别")]),s._v(" "),t("p",[s._v("每个应该由chkconfig管理的服务都需要在其init.d脚本中添加两行或者多行注释。第一行告诉chkconfig默认应该在什么运行级别启动服务，以及启动和停止优先级级别。如果服务在默认情况下不应该在任何运行级别中启动，则应该使用“-”来代替runlevel列表。第二行包含服务的描述，并且可以通过反斜杠继续扩展多行。例如random.init中有三行注释")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# chkconfig: 2345 20 80\n# description: Saves and restores system entropy pool for \\\n# higher quality random number generation.\n")])])]),t("p",[s._v("这意味着随机脚本应该在级别2、3、4和5中启动，它的开始优先级应该是20，它的停止优先级应该是80。")]),s._v(" "),t("p",[s._v("chkconfig还支持从左到右的“-”分隔符，并将优先于可用的“chkconfig：”行应用它们。例如下面的：")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("### BEGIN INIT INFO\n# Provides: foo\n# Required-Start: bar\n# Defalt-Start: 2 3 4 5\n# Default-Stop: 0 1 6\n# Description: Foo init script\n### END INIT INFO\n")])])]),t("p",[s._v("在这种情况下，“foo”的启动优先级将被更改，它将高于“bar”启动优先级。在添加依赖项时必须小心，因为它们可能导致许多脚本的启动和停止优先级发生巨大变化。")]),s._v(" "),t("h2",{attrs:{id:"举例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#举例"}},[s._v("#")]),s._v(" 举例")]),s._v(" "),t("p",[s._v("查看所有服务")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sogrey@bogon ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--list")]),s._v("\n\n注：该输出结果只显示 SysV 服务，并不包含\n原生 systemd 服务。SysV 配置数据\n可能被原生 systemd 配置覆盖。 \n\n      要列出 systemd 服务，请执行 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'systemctl list-unit-files'")]),s._v("。\n      查看在具体 target 启用的服务请执行\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'systemctl list-dependencies [target]'")]),s._v("。\n\nnetconsole     \t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":关\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(":关\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(":关\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(":关\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(":关\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(":关\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(":关\nnetwork        \t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":关\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(":关\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(":开\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(":开\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(":开\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(":开\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(":关\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sogrey@bogon ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ \n")])])]),t("p",[s._v("查看指定服务")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sogrey@bogon ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--list")]),s._v(" vsftpd\nvsftpd         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":关闭  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(":关闭  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(":关闭  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(":关闭  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(":关闭  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(":启用  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(":关闭\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sogrey@bogon ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ \n")])])]),t("p",[s._v("设置ftp服务在3和5这两个级别启动")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sogrey@bogon ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--level")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("35")]),s._v(" vsftpd on  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 级别3和5启动")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sogrey@bogon ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--list")]),s._v(" vsftpd         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看是否设置成功")]),s._v("\nvsftpd         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":关闭  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(":关闭  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(":关闭  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(":启用  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(":关闭  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(":启用  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(":关闭\n")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);